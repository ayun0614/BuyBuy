<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezen.buybuy.mapper.MemberInfoMapper">

	<select id="mypageInfo" resultType="com.ezen.buybuy.entity.Members">
		select * from members where member_id='user01'
	</select>

	<select id="productInfo" resultType="com.ezen.buybuy.entity.Product">
		select * from products where product_idx = 2
	</select>

	<select id="dealerRequestInfo" resultType="com.ezen.buybuy.entity.MypageMain">
		select * from applydealeraccount as a INNER JOIN members as m ON a.member_id = m.member_id where
		a.member_id='user01'
	</select>

	<select id="mypageCnt" resultType="com.ezen.buybuy.entity.MyPageCNT">
		select count(case when o.status = '주문 완료' then o.status end) as count_orderend, count(case when o.status =
		'배송중' then o.status end) as count_ing, count(case when o.status = '배송 완료' then o.status end) as count_end from orders as o INNER JOIN members as m
		ON m.member_id = o.member_id where m.member_id = 'user01'
	</select>

	<select id="mypageOrderInfo" resultType="com.ezen.buybuy.entity.OrderInfo">
		select * from orders as o INNER JOIN products as p ON o.product_idx = p.product_idx INNER JOIN members
		as m ON m.member_id = o.member_id where m.member_id = 'user01' and o.order_num = '8'
	</select>

	<select id="mypageOrderList" resultType="com.ezen.buybuy.entity.MyPageOrder">
		select * from orders as o INNER JOIN products as p ON o.product_idx = p.product_idx where o.member_id
		= 'user01'
	</select>

	<update id="deliStatusUpdate" parameterType="com.ezen.buybuy.entity.Orders">
		update orders set status='주문 취소' where order_num= 1
	</update>

	<select id="mypagePostingList" resultType="com.ezen.buybuy.entity.MyPagePosting">
		select * from products as p INNER JOIN reviewproducts as r ON p.product_idx = r.product_idx where
		p.member_id = 'dealer01'
	</select>

	<insert id="dealerRequest" parameterType="com.ezen.buybuy.entity.ApplyDealerACT">
		insert into applydealeraccount
		values(#{member_id}, 1)
	</insert>

	<update id="deliUpdate" parameterType="com.ezen.buybuy.entity.Orders">
		update orders set
		deli_name=#{deli_name},deli_phone=#{deli_phone},deli_zipcode=#{deli_zipcode},deli_addr=#{deli_addr},deli_detailaddr=#{deli_detailaddr} where
		member_id = 'user01'
	</update>

</mapper>